**TOC**
- [람다보다 간결하게 함수 객체를 만드는 방법](#람다보다-간결하게-함수-객체를-만드는-방법)
- [람다와 메소드 참조의 관계](#람다와-메소드-참조의-관계)
- [메소드 참조의 유형](#메소드-참조의-유형)

# 람다보다 간결하게 함수 객체를 만드는 방법
메소드 참조.

**임의의 키와 Integer 값의 매핑을 관리하는 프로그램 (값이 없으면 숫자 1 매핑, 없으면 기존 값 증가)**
```java
map.merge(key, 1, (count, incr) -> count + incr);
```

- 위에서 사용되는 `Map.merge(키, 값, 함수)` 설명
  - 주어진 키가 맵에 없으면, 키 - 값 쌍 저장
  - 있다면, 함수를 현재 값과 주어진 값에 적용하고, 그 값으로 덮어쓴다.

위 코드는 크게 문제되지 않지만, (count, incr) 람다는 단순히 인수의 합을 반환하기만 하고, 공간을 차지하는 것처럼 보인다.
- 자바 8에서, `Integer` 클래스와 모든 기본 타입의 박싱 타입은 위 람다가 하는 기능을 정적 메소드 sum() 으로 제공.
  - 따라서 아래와 같이 메소드의 참조를 전달해 더 간결한 코드를 얻을 수 있다.

```java
map.merge(key, 1, Integer::sum);
```

> 물론 어떤 경우에는 람다가 더 가독성이 좋고, 유지보수하기 쉬울 수도 있다.

# 람다와 메소드 참조의 관계
람다가 할 수 없으면, 메소드 참조도 할 수 없다.
- 따라서 람다가 너무 길어지면, 메소드 참조로 대체하자. 더 짧은 코드로 만들어줄 것이다.
- 람다로 작성할 코드를 메소드로 빼내고, 해당 메소드를 메소드 참조로 채움으로써, 적절한 네이밍과 설명을 달 수 있다.

람다보다 메소드 참조가 코드가 짧으니, IDE는 바꿀 것을 권고한다.
- 하지만 메소드와 람다가 같은 클래스에 있는 경우, 오히려 반대가 될 수 있다.

```java
service.execute(GoshThisClassNameIsHumongous::action);

service.execute(() -> action());
```

# 메소드 참조의 유형
1. 정적 메소드의 참조 : 앞에서 본 예시들.
2. 인스턴스 메소드의 참조 : 수신 객체를 특정하는 한정적 인스턴스 메소드 참조, 수신 객체를 특정하지 않는 비한정적 인스턴스 메소드 참조.
  - 한정적 참조: 정적 참조와 유사. 함수 객체가 받는 인수와 참조되는 메소드가 받는 인수가 동일.
    - ex. `Instant.now()::isAfter`
  - 비한정적 참조: 함수 객체를 적용하는 시점에 수신 객체를 알려줌. 주로 스트림 파이프라인에서의 매핑과 필터 함수에 사용.
    - ex. `String::toLowerCase`
3. 클래스 생성자를 가리키는 메소드 참조.
  - ex. `TreeMap<K, V>::new`
4. 배열 생성자를 가리키는 메소드 참조.
  - ex. `int[]::new`

> 결과적으로 둘은 기능적으로 동일하니, 더 짧고 명확한 쪽을 사용하자.