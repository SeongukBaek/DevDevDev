**TOC**
- [Random 라이브러리](#random-라이브러리)
  - [자바 7 이후](#자바-7-이후)
- [표준 라이브러리 이점](#표준-라이브러리-이점)
  - [시간 아끼기](#시간-아끼기)
  - [성능 개선](#성능-개선)
  - [기능 추가](#기능-추가)
- [표준 라이브러리를 사용하지 않는 이유](#표준-라이브러리를-사용하지-않는-이유)

# Random 라이브러리
**0부터 명시한 수 사이의 무작위 정수를 반환하는 메소드**
```java
static Random rnd = new Random();

static int random(int n) {
    return Math.abs(rnd.nextInt()) % n;
}
```
위 코드는 세가지 문제를 가지고 있다.
- n이 충분히 크지 않은 2의 제곱수라면, 얼마 지나지 않아 같은 수열이 반복된다.
- n이 2의 제곱수가 아니라면 몇몇 숫자가 평균적으로 더 자주 반환된다.
  - n 값이 크면 이 현상은 더 두드러진다.
- 지정한 범위 바깥의 수가 종종 튀어나올 수 있다.
  - `rnd.nextInt(`) 의 반환 값의 절댓값을 정수로 매핑해서 반환하기 때문.

> `abs()` 에 `Integer.MIN_VALUE` 가 입력되는 경우, `Integer.MIN_VALUE` 가 반환된다. 입력 값의 보수를 취하고 + 1한 값이 반환되는데, `Integer.MIN_VALUE` 의 보수가 `Integer.MAX_VALUE` 이고, + 1하게 되면 오버플로우가 발생해, 다시 자기 자신이 되기 때문이다.

하지만 위 문제는 `Random.nextInt(int)` 가 해결해준다.
- 우리는 그저 해당 라이브러리를 익히고 사용하면 된다.

> 표준 라이브러리를 사용하면 그 코드를 작성한 전문가의 지식과 여러분보다 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다.

## 자바 7 이후
자바 7부터는 `ThreadLocalRandom` 으로 대체해서 사용하자.
- `Random` 보다 더 고품질의 무작위 수를 생성하고, 더 빠르다.
- 포크조인 풀이나 병렬 스트림에서는 `SplittableRandom` 을 사용하라.

> 포크 조인 풀: 하나의 task를 더 작은 task로 분할하고, 여러 쓰레드에게 할당한다. 분할된 task가 처리되면 다른 쓰레드에서 처리한 결과와 함께 상위의 task에게 리턴해주는 방식이다.

# 표준 라이브러리 이점
## 시간 아끼기
중요하지 않은 코드에 시간을 허비할 일이 없다.

## 성능 개선
표준 라이브러리 제작들이 알아서 개선하기 때문에, 시간을 들이지 않아도 성능이 개선될 수 있다.

## 기능 추가
라이브러리에 대한 개발이 계속되므로, 추가적인 기능이 도입될 수 있다.

# 표준 라이브러리를 사용하지 않는 이유
실상은 직접 구현하는 경우들도 있다. 이는 라이브러리에 필요한 기능이 있는지 모르기 때문이다.

> 메이저 릴리스마다 주목할 만한 수많은 기능이 라이브러리에 추가된다.

주목할 만한 라이브러리
- 컬렉션 프레임워크
- 스트림 라이브러리
- java.util.concurrent 의 동시성 기능

때로는 라이브러리가 충분하지 않을 수 있지만, 우선 라이브러리를 사용하려고 시도하자.
- 정말 원하는 기능이 아니라면 대안을 사용하자.
- 대안으로는 고품질의 서드파티 라이브러리가 있다. (ex. Google - Guava)
