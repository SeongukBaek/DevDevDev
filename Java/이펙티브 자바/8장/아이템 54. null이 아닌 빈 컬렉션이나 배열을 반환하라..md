**TOC**
- [null을 반환했을 때의 문제점](#null을-반환했을-때의-문제점)
- [빈 컬렉션 반환](#빈-컬렉션-반환)
- [빈 배열 반환](#빈-배열-반환)

# null을 반환했을 때의 문제점
```java
// 컬렉션을 반환하거나, null 을 반환하는 메소드
```
- 이러한 코드는 사용자로 하여금 `null` 처리 또한 수행하게 만든다.
- 이러한 코드를 **방어 코드**라고 한다.

때로는 "빈 컨테이너를 할당하는데도 비용이 드니, 위와 같이 null 을 반환하는 것이 낫다." 라는 의견도 있다.
하지만 위 입장에 대해서 2가지 틀린 점이 있다.
- 성능 분석 결과, 이 할당이 성능 저하의 주범이라고 확인되지 않는다면, 이는 크게 신경 쓸 수준이 아니다.
- 빈 컬렉션과 배열은 굳이 새로 할당하지 않고도 반환할 수 있다.

# 빈 컬렉션 반환
사용 패턴에 따라 빈 컬렉션 할당이 성능 저하의 요인이 될 수 있다.
- 이에 대한 해법으로, **매번 똑같은 빈 '불변' 컬렉션을 반환**하도록 하자.
  - `Collections.emptyList()`, `Collections.emptySet()`, `Collections.emptyMap()`
  - 불변 객체는 자유롭게 공유 가능.

```java
public static final List EMPTY_LIST = new EmptyList<>();

public static final <T> List<T> emptyList() {
    return (List<T>) EMPTY_LIST;
}
```

# 빈 배열 반환
배열에 대해서도 동일하다. **길이가 0인 배열**을 반환하도록 하자.
- 혹은 길이가 0짜리 배열을 **미리 생성**해두고, 이를 매번 반환하도록 하자.
